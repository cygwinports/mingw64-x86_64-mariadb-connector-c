--- origsrc/CMakeLists.txt	2015-12-08 01:50:35.000000000 -0600
+++ src/CMakeLists.txt	2016-03-04 14:34:07.918358100 -0600
@@ -183,7 +183,7 @@ IF(WITH_SQLITE)
   ADD_DEFINITIONS(-DHAVE_SQLITE)
 ENDIF()
 
-IF(NOT WIN32)
+IF(NOT WIN32 OR WITH_EXTERNAL_ICONV)
   INCLUDE(${CMAKE_SOURCE_DIR}/cmake/FindIconv.cmake)
 ENDIF()
 
--- origsrc/libmariadb/CMakeLists.txt	2015-12-08 01:50:35.000000000 -0600
+++ src/libmariadb/CMakeLists.txt	2016-03-04 14:26:21.017069200 -0600
@@ -324,10 +324,13 @@ my_auth.c
 ma_secure.c
 )
 
-IF(WIN32)
+IF(WIN32 AND NOT ICONV_EXTERNAL)
   INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/win-iconv)
   SET(LIBMARIADB_SOURCES ${LIBMARIADB_SOURCES}
                          ${CMAKE_SOURCE_DIR}/win-iconv/win_iconv.c)
+ELSE()
+  INCLUDE_DIRECTORIES(${ICONV_INCLUDE_DIR})
+  LINK_LIBRARIES(${ICONV_LIBRARIES})
 ENDIF()
 
 IF(ZLIB_FOUND)
